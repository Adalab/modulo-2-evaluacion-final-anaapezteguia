"use strict";const formElement=document.querySelector(".js-form"),inputElement=document.querySelector(".js-seriesInput"),searchBtnElement=document.querySelector(".js-searchBtn"),resetBtnElement=document.querySelector(".js-resetBtn"),ulResultsElement=document.querySelector(".js-searchList");let seriesArray=[],favSeries=[];function getSeries(){const e=inputElement.value;fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{for(const t of e)seriesArray.push(t.show);paintSearchResults()})}function handleForm(e){e.preventDefault()}function setInLocalStorage(){const e=JSON.stringify(favSeries);localStorage.setItem("favSeries",e)}function removeFromLocalStorage(){setInLocalStorage();const e=localStorage.getItem("favSeries"),t=JSON.parse(e);localStorage.removeItem(t)}function getFromLocalStorage(){const e=localStorage.getItem("favSeries"),t=JSON.parse(e);console.log(t)}function paintSearchResults(){let e="";for(const t of seriesArray){let s,r;isFavoriteSerie(t)?(s="favorite",r="â­‘"):(s="",r="");const n=t.id,i=t.name,o=t.image;e+=`<li class="searchList__li js-series" id="${n}">`,e+='<div class="searchList__container">',e+=`<img class="${s} favImg js-seriesImg" src="${null===o?"https://via.placeholder.com/210x295/dcbcc6/666666/?text=DEFAULT IMAGE":o.medium}" alt="${i}" title="${i}" size="210x295" >`,e+=`<h3 class="searchList__title ${s} title js-seriesTitle">${i} ${r}`,e+="</div>",e+="</li>"}ulResultsElement.innerHTML=e,listenSeriesEvents()}function isFavoriteSerie(e){return void 0!==favSeries.find(t=>t.id===e.id)}function listenSeriesEvents(){const e=document.querySelectorAll(".js-series");for(const t of e)t.addEventListener("click",handlePickedSeries)}function handlePickedSeries(e){const t=parseInt(e.currentTarget.id),s=favSeries.findIndex((function(e){return e.id===t})),r=seriesArray.find((function(e){return e.id===t})),n=r.id;-1===s?(favSeries.push(r),setInLocalStorage()):s>=0&&t===n&&(favSeries.splice(s,1),removeFromLocalStorage()),paintSearchResults()}searchBtnElement.addEventListener("click",getSeries),formElement.addEventListener("submit",handleForm);